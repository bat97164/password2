<%= render partial: 'shared/dashboard_header' %>
  
<main>
  <% if @expired_payloads.empty? %>
    <p class='text-center'>
      You currently have no expired pushes.
    </p>
    <p class='text-center'>
      <%= link_to 'Push Something Now', root_path, class: 'btn btn-primary' %>
    </p>
  <% else %>
    <div class="table-responsive">
    <table class="table table-striped table-sm table-hover" aria-label='Expired Pushes'>
      <thead>
      <tr>
          <th scope="col">Secret URL Token</th>
          <th scope="col">Expired On</th>
          <th scope="col">Expiration Cause</th>
          <th scope="col">Controls</th>
      </tr>
      </thead>
      <tbody>
      <% for payload in @expired_payloads do %>
        <tr>
          <td><%= payload.url_token %></td>
          <td><%= payload.expired_on %></td>
          <td>
            <% if payload.deleted %>
              Manually Deleted
            <% else %>
              Expired
            <% end %>
          </td>
          <td>
            <%= link_to audit_password_path(payload), class: 'btn btn-info btn-sm', rel: 'nofollow', disable_with: 'Processing...' do %>
              Audit Log
            <% end %>
          </td>
        </tr>
      <% end %>
      </tbody>
    </table>
    </div>
    <%= will_paginate @expired_payloads, renderer: WillPaginate::ActionView::BootstrapLinkRenderer, list_classes: %w(pagination justify-content-center) %>
  <% end %>
</main>